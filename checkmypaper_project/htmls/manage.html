<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Manage Headings & Images</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5">

<div class="container">
  <h2>Manage Headings & Images</h2>
  <!--Headings-->
  <h4>Headings</h4>
  <ul class="list-group">
  {% for h in headings %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      {{ h.title }}
      <div>
        <!-- Add subheading form -->
        <form method="POST" class="d-inline ms-2">
          {% csrf_token %}
          <input type="text" name="new_heading" placeholder="Add subheading" class="form-control d-inline w-auto">
          <input type="hidden" name="parent_heading" value="{{ h.title }}">
          <button class="btn btn-sm btn-primary">Add</button>
        </form>
        <!-- Remove heading -->
        <form method="POST" class="d-inline ms-2">
          {% csrf_token %}
          <input type="hidden" name="remove_heading" value="{{ h.title }}">
          <button class="btn btn-sm btn-danger">Remove</button>
        </form>
      </div>

      {% if h.sub %}
        <ul class="list-group ms-4 mt-2">
          {% for s1 in h.sub %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{ s1.title }}
              <div>
                <form method="POST" class="d-inline ms-2">
                  {% csrf_token %}
                  <input type="text" name="new_heading" placeholder="Add subheading" class="form-control d-inline w-auto">
                  <input type="hidden" name="parent_heading" value="{{ s1.title }}">
                  <button class="btn btn-sm btn-primary">Add</button>
                </form>
                <form method="POST" class="d-inline ms-2">
                  {% csrf_token %}
                  <input type="hidden" name="remove_heading" value="{{ s1.title }}">
                  <button class="btn btn-sm btn-danger">Remove</button>
                </form>
              </div>

              {% if s1.sub %}
                <ul class="list-group ms-4 mt-2">
                  {% for s2 in s1.sub %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      {{ s2.title }}
                      <form method="POST" class="d-inline ms-2">
                        {% csrf_token %}
                        <input type="hidden" name="remove_heading" value="{{ s2.title }}">
                        <button class="btn btn-sm btn-danger">Remove</button>
                      </form>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </li>
  {% endfor %}
</ul>

<!-- Persistent Add Top-Level Heading Button -->
<form method="POST" class="mt-3">
  {% csrf_token %}
  <input type="text" name="new_heading" placeholder="Add top-level heading" class="form-control d-inline w-auto">
  <button class="btn btn-success">Add Main Heading</button>
</form>


  <!-- Images -->
  <div class="mb-4">
    <h4>Images</h4>
    <div class="d-flex flex-wrap gap-3 mb-2">
      {% for img in media_images %}
        <div class="text-center" style="width:150px;">
          <a href="{{ MEDIA_URL }}{{ img }}" target="_blank">
            <img src="{{ MEDIA_URL }}{{ img }}" class="img-fluid rounded" alt="image">
          </a>
          <div class="text-truncate">{{ img }}</div>
        </div>
      {% endfor %}
    </div>

    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="mb-2">
        <input type="file" name="image" class="form-control">
      </div>
      <button class="btn btn-success">Upload Image</button>
    </form>
  </div>
  <a href="/" class="btn btn-warning">Main Page</a>
      
</div>

</body>
</html>
